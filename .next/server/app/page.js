(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},8893:e=>{"use strict";e.exports=require("buffer")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},4026:e=>{"use strict";e.exports=require("string_decoder")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},8061:e=>{"use strict";e.exports=require("node:assert")},2761:e=>{"use strict";e.exports=require("node:async_hooks")},2254:e=>{"use strict";e.exports=require("node:buffer")},27:e=>{"use strict";e.exports=require("node:console")},6005:e=>{"use strict";e.exports=require("node:crypto")},5714:e=>{"use strict";e.exports=require("node:diagnostics_channel")},604:e=>{"use strict";e.exports=require("node:dns")},5673:e=>{"use strict";e.exports=require("node:events")},3977:e=>{"use strict";e.exports=require("node:fs/promises")},8849:e=>{"use strict";e.exports=require("node:http")},2725:e=>{"use strict";e.exports=require("node:http2")},7503:e=>{"use strict";e.exports=require("node:net")},9411:e=>{"use strict";e.exports=require("node:path")},8846:e=>{"use strict";e.exports=require("node:perf_hooks")},5815:e=>{"use strict";e.exports=require("node:querystring")},5467:e=>{"use strict";e.exports=require("node:sqlite")},4492:e=>{"use strict";e.exports=require("node:stream")},2332:e=>{"use strict";e.exports=require("node:timers")},1764:e=>{"use strict";e.exports=require("node:tls")},7261:e=>{"use strict";e.exports=require("node:util")},3746:e=>{"use strict";e.exports=require("node:util/types")},4086:e=>{"use strict";e.exports=require("node:worker_threads")},5628:e=>{"use strict";e.exports=require("node:zlib")},4793:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d}),r(324),r(1506),r(5866);var s=r(3191),a=r(8716),o=r(7922),n=r.n(o),i=r(5231),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let d=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,324)),"C:\\Users\\PMS\\Desktop\\dnfm\\app\\page.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,1506)),"C:\\Users\\PMS\\Desktop\\dnfm\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\PMS\\Desktop\\dnfm\\app\\page.tsx"],u="/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7650:()=>{},1102:(e,t,r)=>{Promise.resolve().then(r.bind(r,5061)),Promise.resolve().then(r.bind(r,8342))},6524:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},5061:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326),a=r(7577);function o({badge:e}){let[t,r]=(0,a.useState)(!1);return(0,s.jsxs)("div",{className:"relative inline-block",children:[s.jsx("div",{className:"w-8 h-8 rounded-full cursor-pointer transition-all duration-200 hover:scale-110 flex items-center justify-center overflow-hidden",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:()=>r(!t),children:e.iconUrl?s.jsx("div",{className:"w-8 h-8 rounded-full bg-center bg-cover bg-no-repeat",style:{backgroundImage:`url("${e.iconUrl}")`},title:e.name}):s.jsx("span",{className:"text-xs font-bold text-gray-600",children:e.name?.charAt(0)||"?"})}),t&&s.jsx("div",{className:"absolute top-full left-0 mt-2 z-50",children:(0,s.jsxs)("div",{className:"bg-gray-900 text-white text-xs rounded-lg p-3 shadow-lg min-w-[200px] max-w-[300px]",children:[s.jsx("div",{className:"font-semibold mb-2 text-yellow-400",children:e.name}),(0,s.jsxs)("div",{className:"border-t border-gray-700 pt-2",children:[(0,s.jsxs)("div",{className:"text-gray-400 text-xs mb-1",children:["획득 조건 : ",e.earnedCondition]}),(0,s.jsxs)("div",{className:"text-gray-400 text-xs",children:["획득일 : ",new Date(e.earnedAt).toLocaleDateString()]})]}),s.jsx("div",{className:"absolute bottom-full left-4 w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-gray-900"})]})})]})}},8342:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(326);let a={common:{bg:"bg-gray-200",border:"border-gray-400",text:"text-gray-800"},uncommon:{bg:"bg-blue-200",border:"border-blue-400",text:"text-blue-800"},rare:{bg:"bg-purple-200",border:"border-purple-400",text:"text-purple-800"},unique:{bg:"bg-pink-200",border:"border-pink-400",text:"text-pink-800"},epic:{bg:"bg-yellow-200",border:"border-yellow-600",text:"text-yellow-900"}};function o({title:e,rarity:t="common"}){let r=a[t];return s.jsx("div",{className:`inline-flex items-center ${r.bg} ${r.text} px-2 py-1 rounded-md text-xs font-bold shadow-sm border-2 ${r.border}`,children:e})}},1506:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a});var s=r(9510);r(7272),r(1159);let a={title:"결투장 해",description:"던파M 길드 랭킹 사이트"};function o({children:e}){return s.jsx("html",{lang:"ko",children:s.jsx("body",{className:"text-gray-800 bg-gray-50 antialiased",children:(0,s.jsxs)("div",{className:"min-h-screen",children:[s.jsx("header",{className:"sticky top-0 z-20 backdrop-blur bg-white/80 border-b border-gray-200 shadow-sm",children:s.jsx("div",{className:"mx-auto max-w-6xl px-4 py-4 flex items-center justify-center",children:s.jsx("a",{href:"/",className:"font-bold text-xl text-gray-800",children:"결투장 해"})})}),s.jsx("main",{children:e})]})})})}},324:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(9510);r(1159);var a=r(8190);let o={다크로드:{file:"char_thumbs_1_second.png",position:0,total:4},블러드이블:{file:"char_thumbs_1_second.png",position:1,total:4},검신:{file:"char_thumbs_1_second.png",position:2,total:4},인다라천:{file:"char_thumbs_1_second.png",position:3,total:4},마제스티:{file:"char_thumbs_2_second.png",position:0,total:4},네메시스:{file:"char_thumbs_2_second.png",position:1,total:4},디어사이드:{file:"char_thumbs_2_second.png",position:2,total:4},검제:{file:"char_thumbs_2_second.png",position:3,total:4},염제폐월수화:{file:"char_thumbs_3_second.png",position:0,total:4},카이저:{file:"char_thumbs_3_second.png",position:1,total:4},용독문주:{file:"char_thumbs_3_second.png",position:2,total:4},얼티밋디바:{file:"char_thumbs_3_second.png",position:3,total:4},레이븐:{file:"char_thumbs_4_second.png",position:0,total:4},디스트로이어:{file:"char_thumbs_4_second.png",position:1,total:4},프라임:{file:"char_thumbs_4_second.png",position:2,total:4},커맨더:{file:"char_thumbs_4_second.png",position:3,total:4},오버마인드:{file:"char_thumbs_5_second.png",position:0,total:4},지니위즈:{file:"char_thumbs_5_second.png",position:1,total:4},아슈타르테:{file:"char_thumbs_5_second.png",position:2,total:4},헤카테:{file:"char_thumbs_5_second.png",position:3,total:4},세라핌:{file:"char_thumbs_6_second.png",position:0,total:5},인페르노:{file:"char_thumbs_6_second.png",position:1,total:5},천선낭랑:{file:"char_thumbs_6_second.png",position:2,total:5},리디머:{file:"char_thumbs_6_second.png",position:3,total:5},이그제큐터:{file:"char_thumbs_6_second.png",position:4,total:5},세인트:{file:"char_thumbs_7_second.png",position:0,total:2},저스티스:{file:"char_thumbs_7_second.png",position:1,total:2},테라치프:{file:"char_thumbs_8_second.png",position:0,total:2},트라이브윙:{file:"char_thumbs_8_second.png",position:1,total:2},크림슨로제:{file:"char_thumbs_9_second.png",position:0,total:4},스톰트루퍼:{file:"char_thumbs_9_second.png",position:1,total:4},옵티머스:{file:"char_thumbs_9_second.png",position:2,total:4},프레이야:{file:"char_thumbs_9_second.png",position:3,total:4},워로드:{file:"char_thumbs_10_second.png",position:0,total:2},에레보스:{file:"char_thumbs_10_second.png",position:1,total:2},알키오네:{file:"char_thumbs_11_second.png",position:0,total:2},시라누이:{file:"char_thumbs_11_second.png",position:1,total:2}};function n({job:e,size:t=70,className:r=""}){let a=function(e){if(!e)return null;let t=e.replace(/\s+/g,"").toLowerCase();for(let[e,r]of Object.entries(o)){let s=e.replace(/\s+/g,"").toLowerCase();if(t.includes(s)||s.includes(t))return r}return null}(e);if(!a)return s.jsx("div",{className:`relative overflow-hidden bg-slate-800 rounded-full flex-shrink-0 flex items-center justify-center ${r}`,style:{width:t,height:t},title:e||"알 수 없는 직업",children:s.jsx("span",{className:"text-xs text-slate-400",children:e?e.charAt(0):"?"})});let{file:n,position:i,total:l}=a,d=`/images/${n}`;return(0,s.jsxs)("div",{className:`relative overflow-hidden bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex-shrink-0 ${r}`,style:{width:t,height:t},title:e||"알 수 없는 직업",children:[s.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url(${d})`,backgroundSize:`${l*t}px ${t}px`,backgroundPosition:`-${i*t}px center`,backgroundRepeat:"no-repeat",borderRadius:"50%"}}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-xs text-gray-600 opacity-0 hover:opacity-100 transition-opacity",style:{backgroundColor:"rgba(255, 255, 255, 0.9)",borderRadius:"50%"},children:s.jsx("span",{className:"font-bold",children:e?e.charAt(0):"?"})})]})}var i=r(719),l=r(2057),d=r(9487);function c({delta:e,className:t=""}){if(0===e)return s.jsx("span",{className:`bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs font-medium ${t}`,children:"➖ 변동없음"});let r=e>0;return(0,s.jsxs)("span",{className:`${r?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"} px-2 py-0.5 rounded-full text-xs font-medium ${t}`,children:[r?"↗️":"↘️"," ",r?"+":"",e.toLocaleString()]})}async function u(){let e=(0,d.z)();try{let{data:t,error:r}=await e.from("user_titles").select("author_key, title, rarity");r&&console.error("칭호 데이터 조회 실패:",r);let{data:s,error:a}=await e.from("user_badges").select(`
        author_key,
        badge_id,
        earned_at,
        earned_condition,
        badge_definitions!inner (
          id,
          name,
          description,
          icon_url
        )
      `);if(a)return console.error("Error fetching badges:",a),{titleMap:new Map,badgeMap:new Map};let o=new Map;t?.forEach(e=>{o.set(e.author_key,{title:e.title,rarity:e.rarity})});let n=new Map;return s?.forEach(e=>{let t=e.author_key;n.has(t)||n.set(t,[]),console.log("Processing badge for",t,":",{badgeId:e.badge_id,badgeDefinitions:e.badge_definitions}),n.get(t).push({id:e.badge_definitions?.id,name:e.badge_definitions?.name,description:e.badge_definitions?.description,iconUrl:e.badge_definitions?.icon_url,earnedAt:e.earned_at,earnedCondition:e.earned_condition})}),console.log("DB에서 가져온 칭호 데이터:",Array.from(o.entries())),console.log("DB에서 가져온 뱃지 데이터:",Array.from(n.entries())),{titleMap:o,badgeMap:n}}catch(e){return console.error("Error fetching user data:",e),{titleMap:new Map,badgeMap:new Map}}}async function p(){let e=await (0,a.ff)("항마압축파",100),{titleMap:t,badgeMap:r}=await u(),o={members:e,sampledPages:0,generatedAt:new Date().toISOString()};return s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4 sm:p-6 lg:p-8",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsxs)("div",{className:"inline-flex items-center gap-3 mb-4",children:[s.jsx("img",{src:"/images/logo1.png",alt:"Logo 1",className:"h-12 w-auto"}),s.jsx("h1",{className:"text-3xl sm:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"항마압축파 랭킹"}),s.jsx("img",{src:"/images/logo2.png",alt:"Logo 2",className:"h-12 w-auto"})]}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-600",children:[s.jsx("span",{children:"만든놈 :"}),s.jsx("img",{src:"/images/profile.png",alt:"Profile",className:"h-6 w-6 rounded-full"}),s.jsx("span",{className:"font-medium",children:"정신나간메짱"})]})]}),0===o.members.length?(0,s.jsxs)("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx("span",{className:"text-3xl",children:"\uD83D\uDE14"})}),s.jsx("p",{className:"text-xl text-gray-600 mb-2",children:"등록된 길드원이 없습니다"}),s.jsx("p",{className:"text-gray-500",children:"길드원 프로필 등록을 먼저 실행해주세요"})]}):s.jsx("div",{className:"grid gap-3 sm:gap-4",children:o.members.map((e,a)=>{let o=`${e.server}:${e.nickname}`.toLowerCase(),d=t.get(o),u=r.get(o)||[];return console.log(`${e.nickname} 매칭 확인:`,{authorKey:o,title:d?.title,rarity:d?.rarity,badgeCount:u.length,hasTitle:t.has(o),titleData:d}),(0,s.jsxs)("div",{className:`relative bg-white rounded-xl shadow-sm border border-gray-100 p-4 sm:p-6 transition-all duration-200 hover:shadow-md hover:scale-[1.02] ${0===a?"ring-2 ring-yellow-400 bg-gradient-to-r from-yellow-50 to-orange-50":1===a?"ring-2 ring-gray-400 bg-gradient-to-r from-gray-50 to-slate-50":2===a?"ring-2 ring-amber-600 bg-gradient-to-r from-amber-50 to-yellow-50":""}`,children:[s.jsx("div",{className:`absolute -top-2 -left-2 w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${0===a?"bg-gradient-to-r from-yellow-400 to-orange-500 text-white shadow-lg":1===a?"bg-gradient-to-r from-gray-400 to-gray-500 text-white shadow-lg":2===a?"bg-gradient-to-r from-amber-600 to-yellow-600 text-white shadow-lg":"bg-gradient-to-r from-blue-500 to-purple-600 text-white"}`,children:e.rank}),(0,s.jsxs)("div",{className:"flex items-start gap-3 xs:gap-4 sm:gap-6",children:[(0,s.jsxs)("div",{className:"flex-shrink-0 flex flex-col items-center",children:[(0,s.jsxs)("div",{className:"relative mb-2",children:[s.jsx(n,{job:e.job,size:70,className:"w-[60px] h-[60px] xs:w-[70px] xs:h-[70px] sm:w-[80px] sm:h-[80px] ring-3 xs:ring-4 ring-white shadow-xl"}),a<3&&(0,s.jsxs)("div",{className:"absolute -top-1 -right-1 xs:-top-2 xs:-right-2",children:[0===a&&s.jsx("span",{className:"text-lg xs:text-xl sm:text-2xl",children:"\uD83D\uDC51"}),1===a&&s.jsx("span",{className:"text-lg xs:text-xl sm:text-2xl",children:"\uD83E\uDD48"}),2===a&&s.jsx("span",{className:"text-lg xs:text-xl sm:text-2xl",children:"\uD83E\uDD49"})]})]}),d&&(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 w-full",children:[s.jsx("div",{className:"w-full text-black text-xs font-bold text-center py-1 px-2",children:"칭호"}),s.jsx(i.Z,{title:d.title,rarity:d.rarity})]})]}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[u.length>0&&s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsx("div",{className:"flex gap-1",children:u.map(e=>s.jsx(l.Z,{badge:e},e.id))})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-1.5 xs:mb-2",children:[(0,s.jsxs)("span",{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-2 xs:px-3 py-1 rounded-full text-xs xs:text-sm font-bold shadow-sm flex-shrink-0",children:["Lv.",e.level]}),s.jsx("h3",{className:"text-lg xs:text-xl sm:text-2xl font-black text-gray-900 truncate",children:e.nickname})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 xs:gap-2 sm:gap-3 mb-1.5 xs:mb-2 flex-wrap",children:[s.jsx("span",{className:"bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-700 px-2 xs:px-3 py-1 xs:py-1.5 rounded-full text-xs xs:text-sm sm:text-base font-semibold",children:e.job}),(0,s.jsxs)("span",{className:"bg-gradient-to-r from-green-100 to-emerald-100 text-green-700 px-2 xs:px-3 py-1 xs:py-1.5 rounded-full text-xs xs:text-sm sm:text-base font-bold",children:["⚔️ ",e.combatPower?.toLocaleString?.()??e.combatPower]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 xs:gap-2 flex-wrap",children:[(0,s.jsxs)("span",{className:"bg-purple-100 text-purple-700 px-2 xs:px-3 py-1 rounded-full text-xs xs:text-sm font-medium",children:["\uD83D\uDCCD ",e.server]}),e.adventureName&&(0,s.jsxs)("span",{className:"bg-gradient-to-r from-orange-100 to-yellow-100 text-orange-700 px-2 xs:px-3 py-1 rounded-full text-xs xs:text-sm font-medium truncate max-w-[140px] xs:max-w-none",title:`${e.adventureName} Lv.${e.adventureLevel}`,children:["\uD83C\uDFF0 ",e.adventureName," Lv.",e.adventureLevel]})]}),void 0!==e.combatPowerDelta&&0!==e.combatPowerDelta&&(0,s.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[s.jsx("span",{className:"text-xs text-gray-500",children:"어제 대비"}),s.jsx(c,{delta:e.combatPowerDelta})]})]})]})]},e.nickname+e.server)})})]})})}},2057:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\PMS\Desktop\dnfm\components\Badge.tsx#default`)},719:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(8570).createProxy)(String.raw`C:\Users\PMS\Desktop\dnfm\components\Title.tsx#default`)},9487:(e,t,r)=>{"use strict";r.d(t,{z:()=>a});var s=r(9498);function a(){let e=process.env.SUPABASE_URL??"",t=process.env.SUPABASE_SERVICE_ROLE??"";if(!e||!t)throw Error("Supabase env missing. Set SUPABASE_URL and SUPABASE_SERVICE_ROLE");return(0,s.eI)(e,t,{auth:{persistSession:!1}})}},8190:(e,t,r)=>{"use strict";r.d(t,{LJ:()=>u,VF:()=>c,ff:()=>p}),r(917);var s=r(9487),a=r(3326);let o=(process.env.GUILD_FILTER||"항마압축파").toLowerCase(),n=(process.env.RECHECK_COOLDOWN_MIN,Number(process.env.PROFILE_RECHECK_MIN||1440));function i(e,t){return`${e}:${t}`.toLowerCase()}async function l(e){let t=(0,s.z)(),r=new Date(Date.now()-6e4*n).toISOString(),{data:a}=await t.from("profiles_checked").select("user_id, checked_at").eq("user_id",String(e)).gt("checked_at",r).maybeSingle();return!!a}async function d(e,t){let r=(0,s.z)();await r.from("profiles_checked").upsert({user_id:String(e),status:t,checked_at:new Date().toISOString()})}async function c(e,t,r=o){let n=[];for(let r=0;r<t;r++){let t=String(e+r);if(!await l(t))try{let e=await (0,a.tF)(t);if(!e.exists)continue;let r=e.profile;{let e=r?.server&&r?.nickname?i(r.server,r.nickname):`user:${t}`,a=(0,s.z)();await a.from("authors").upsert({author_key:e,server:r?.server??null,nickname:r?.nickname??null,job:r?.job??null,level:r?.level??null,combat_power:r?.combatPower??null,guild:r?.guild??null,adventure_name:r?.adventureName??null,adventure_level:r?.adventureLevel??null,avatar_url:r?.avatarUrl??null,updated_at:new Date().toISOString()}),await d(t,"matched"),n.push(e)}}catch{}}return{startId:e,scanned:t,matched:n.length}}async function u(e,t,r=o){let n=[],l=0,c=Date.now();for(let r=0;r<t;r++){let t,o,c;let u=String(e+r),p=Date.now(),m=!1,x=!1;try{let e=await (0,a.tF)(u);if(m=!!e.exists,e.exists&&e.profile&&(t=e.profile.guild,o=e.profile.nickname,c=e.usedFallback,e.profile.server&&e.profile.nickname)){x=!0;let t=i(e.profile.server,e.profile.nickname),r=(0,s.z)();await r.from("authors").upsert({author_key:t,server:e.profile.server,nickname:e.profile.nickname,job:e.profile.job,level:e.profile.level,combat_power:e.profile.combatPower,guild:e.profile.guild,adventure_name:e.profile.adventureName,adventure_level:e.profile.adventureLevel,avatar_url:e.profile.avatarUrl,updated_at:new Date().toISOString()}),await d(u,"matched"),l++}}catch{}n.push({id:u,exists:m,matched:x,guild:t,nickname:o,usedFallback:c,ms:Date.now()-p})}return{startId:e,scanned:t,matched:l,totalSec:Math.round((Date.now()-c)/100)/10,details:n}}async function p(e,t=100){let r=(0,s.z)(),{data:a}=await r.from("authors").select("server, nickname, job, level, combat_power, guild, adventure_name, adventure_level, avatar_url, previous_combat_power, combat_power_delta, last_checked_at").ilike("guild",`%${e}%`).order("combat_power",{ascending:!1}).limit(t);return(a||[]).map((e,t)=>({rank:t+1,nickname:e.nickname,level:e.level??void 0,combatPower:e.combat_power??void 0,job:e.job??void 0,server:e.server??void 0,avatarUrl:e.avatar_url??void 0,adventureName:e.adventure_name??void 0,adventureLevel:e.adventure_level??void 0,previousCombatPower:e.previous_combat_power??void 0,combatPowerDelta:e.combat_power_delta??0,lastCheckedAt:e.last_checked_at??void 0}))}},4998:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(6621);let a=e=>[{type:"image/png",sizes:"210x210",url:(0,s.fillMetadataSegment)(".",e.params,"icon.png")+"?2b5bee993761cbe4"}]},7272:()=>{}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,498,917,471,621,326],()=>r(4793));module.exports=s})();